<th:block th:fragment="mealSlotFragment(meal, dayIndex)">
    <div class="meal-slot relative group transition-all mt-1"
         th:data-day-index="${dayIndex}"
         th:data-meal-type="${meal?.type}"
         ondragover="allowDrop(event)"
         ondrop="drop(event)">

        <input type="hidden" class="input-meal-item-id" th:value="${meal?.mealItemId}">
        <input type="hidden" class="input-recipe-id" th:value="${meal?.recipeId}">

        <button onclick="removeMealSlot(this)" type="button" 
                class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 shadow-sm cursor-pointer">
            <span class="material-symbols-outlined text-[12px]">close</span>
        </button>

        <div th:classappend="${meal?.recipeId == null} ? 'border-chef-orange bg-chef-orange/5' : 'border-nutri-green bg-gray-50'"
             class="flex flex-col justify-center min-h-[60px] rounded-lg border-2 border-dashed p-2 hover:border-primary cursor-pointer transition-colors relative z-10">

            <div class="flex justify-between items-start pointer-events-none"> <p class="text-sm font-bold text-dark-ink line-clamp-1 meal-name" th:text="${meal?.recipeName}">Name</p>
                <span class="text-[10px] text-gray-400 meal-cal" th:text="${meal?.calories + ' kcal'}"></span>
            </div>

            <p th:if="${meal?.recipeId == null}" class="text-xs text-chef-orange mt-1 italic hint-text pointer-events-none">Drag recipe here</p>

            <input type="hidden" class="input-recipe-id" th:value="${meal?.recipeId}">
            <input type="hidden" class="input-recipe-name" th:value="${meal?.recipeName}">
            <input type="hidden" class="input-recipe-cal" th:value="${meal?.calories}">
        </div>

        <div class="absolute inset-0 bg-primary/10 border-2 border-primary border-dashed rounded-lg hidden pointer-events-none drop-overlay flex items-center justify-center z-30">
            <span class="text-primary font-bold text-sm">Drop to Replace</span>
        </div>
    </div>
</th:block>